{% extends async ? 'async-layout.html' : 'layout.html' %}

{% block title %}Livre d'or{% endblock %}

{% block header_photo %}livre.jpg{% endblock %}

{% block content %}

{{ parent() }}

<div class="row-fluid">
  <h1>Livre d'or</h1>
</div>
<div class="row-fluid">
 	<p>
    	<strong>Voici ce qu'on pense de chez nous :</strong>
	<p>
 {% if commentaires is not empty %}
  <table class="table table-hover">
	<thead>
		<th>Commentaires</th>
	</thead>
    {% for commentaire in commentaires %}
      <tr>
	      <td>
	        <div class="offset1">{{ commentaire.commentaire }}</div>
	      </td>
      </tr>
    {% endfor %}
  </table>
  {% else %}
  <p><em>Il n'y a aucun groupe Ã  afficher</em></p>
  {% endif %}
</div>

<br />

<div class="row-fluid centrer">
   <strong>Vous êtes venus chez nous ?<br /> Dites-nous ce que vous en avez pensé :</strong> <br/><br />
	
	<!-- Si jamais il y a une erreur lors de l'appel du commentaire -->
	{% if errors is not empty %}
	    <div class="alert alert-error span9 centrer">
	    	<button type="button" class="close" data-dismiss="alert">&times;</button>
	    	<strong>Attention</strong> {{ errors[0] }}.
	    </div>
	{% endif %}
	
	{% if errors is not empty %}
		<div class="alert alert-success">
		    <button type="button" class="close" data-dismiss="alert">&times;</button>
		    <strong>Enregistré !</strong> C'est bon le commentaire a bien été enregistré.
	    </div>
    {% endif %}
    
   <!-- Formulaire pour les commentaires pour le livre d'or -->
   <form method="post" action="{{ queries('index','livredor',{}) }}">
   <!-- ici on écrit le commentaire dans le textarea, un code javascript permet de limiter le nombre de caractères à 250 -->
	   <textarea 
	   	class="field span5" rows="3" cols="50" name=commentaire
	   	placeholder="Saisissez votre commentaire"
	   	onKeyDown="countAreaChars(this.form.commentaire,this.form.leftChars,250);"
		onKeyUp="countAreaChars(this.form.commentaire,this.form.leftChars,250);"></textarea> 		
		<br />
		<!-- Ici on affiche le nombre de caractères restant dans le textarea -->
		<input type=text name=leftChars readonly size=3 maxlength=3 value="250"> caractères restants		
		<br />
		
		<input type="submit" class="btn" value="Envoyer votre commentaire">
	</form>
</div>


{% endblock %}